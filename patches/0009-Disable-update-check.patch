From be75aac451bf6a343f88a58161d375c50cc4ccdd Mon Sep 17 00:00:00 2001
From: letsfindaway <me@letsfindaway.de>
Date: Wed, 16 Nov 2022 08:31:29 +0100
Subject: [PATCH] feat: disable software update check

- for packages maintained by a Linux distribution,
  a software update check is not relevant
- disable the check in the settings
- hide the associated checkbox in the preferences
---
 resources/etc/OpenBoard.config       | 5 ++---
 src/core/UBPreferencesController.cpp | 1 +
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/resources/etc/OpenBoard.config b/resources/etc/OpenBoard.config
index 0120f922d..9801e6489 100644
--- a/resources/etc/OpenBoard.config
+++ b/resources/etc/OpenBoard.config
@@ -1,9 +1,8 @@
 [App]
 AngleTolerance=4
-HideCheckForSoftwareUpdate=false
+HideCheckForSoftwareUpdate=true
 HideSwapDisplayScreens=true
-EnableAutomaticSoftwareUpdates=true
-EnableSoftwareUpdates=true
+EnableAutomaticSoftwareUpdates=false
 EnableStartupHints=true
 FavoriteToolURIs=openboardtool://openboard/mask, openboardtool://ruler, openboardtool://compass, openboardtool://protractor, openboardtool://triangle, openboardtool://magnifier, openboardtool://cache
 IsInSoftwareUpdateProcess=false
diff --git a/src/core/UBPreferencesController.cpp b/src/core/UBPreferencesController.cpp
index 4e7c5612a..b18635064 100644
--- a/src/core/UBPreferencesController.cpp
+++ b/src/core/UBPreferencesController.cpp
@@ -90,6 +90,7 @@ UBPreferencesController::UBPreferencesController(QWidget *parent)
     mPreferencesWindow = new UBPreferencesDialog(this,parent, Qt::Dialog);
     mPreferencesUI = new Ui::preferencesDialog();  // deleted in destructor
     mPreferencesUI->setupUi(mPreferencesWindow);
+    mPreferencesUI->softwareUpdateGroupBox->hide();     // disable check for software update
     adjustScreens(1);
     connect(mDesktop, &QDesktopWidget::screenCountChanged, this, &UBPreferencesController::adjustScreens);
 
